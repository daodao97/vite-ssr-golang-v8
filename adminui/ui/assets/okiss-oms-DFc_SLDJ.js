import"./vue-B-SfU_kR.js";import{c as je,p as dt,V as zt,U as fe,F as ue,I as Jt,D as Wt,u as tt,z as ct,y as Xt,_ as Qt,o as Zt,L as Yt,s as oe,Q as mt,W as be,S as el}from"./okiss-utils-DLB9Z4qj.js";import{c as tl,d as Re}from"./pinia-CbWoapWl.js";import{a as W}from"./js-cookie-Cz0CWeBA.js";import{z as ht,E as ft,a as bt,b as ll,c as al,d as me,e as il,f as ol,g as nl,h as sl,i as rl,j as yt,k as ne,l as pl,m as ul,n as Ne,o as Ve,p as dl,q as cl,r as ml,s as hl,t as vt,u as gt,v as kt,w as ke,x as fl,y as bl,A as yl,B as vl,C as _e,D as qe,F as gl}from"./element-plus-Dafmimlt.js";import{l as b,k as kl}from"./lodash-BU9I_SoQ.js";import{$ as Se}from"./mockjs-DoeQ1pEj.js";import{a as Ue}from"./axios-ngrFHoWO.js";import"./dayjs-hCpwiSkR.js";import{c as _l,a as wl,u as we,b as Z,o as xl,d as Sl}from"./vue-router-DXq6Y188.js";import{d as El}from"./path-to-regexp-BqOC2I1t.js";import{W as Fe,J as Ge,Y as te,X as ce,P as Tl,y as Il,Q as Bl}from"./okiss-vbtf-C9fbskm7.js";/* empty css                      */import{e as Ol}from"./mitt-BUWluRzQ.js";import{Q as Cl,R as Pl}from"./element-plus-icons-vue-D0EVbKiy.js";import{m as Dl}from"./vueuse-core-BdHuZ0wz.js";import{l as Al}from"./vue3-markdown-it-DVMXq1Os.js";import{s as Ll}from"./crypto-js-Dyp0U-M-.js";import{R as De}from"./nprogress-BQSorFX4.js";import{r as O,u as d,i as He,e as $l,d as Ml}from"./vue-reactivity-CXsOe-dj.js";import{d as K,c as x,e as y,f as n,h as k,l as ye,q as C,F as P,J as N,v as u,o as xe,j as f,k as r,s as Ke,t as I,P as A,a as jl,r as de,K as se,m as X,G as ze,p as Rl,x as Nl,g as Vl,M as ql,Q as Ul}from"./vue-runtime-core-BdA0WvRm.js";import{d as Ee,a as lt,w as at,T as Fl,e as Gl,f as Hl}from"./vue-runtime-dom-CeGziGLf.js";import{e as Q,t as j,n as Kl,g as Y}from"./vue-shared-DfJbHraB.js";String.prototype.format||(String.prototype.format=function(){const e=arguments;return this.replace(/{(\d+)}/g,function(t,l){return typeof e[l]<"u"?e[l]:t})});const Je="oms:token";function We(){return W.get(Je)||""}function zl(e){const t=q($),l=new Date(new Date().getTime()+(t.tokenExpire||1440*60*1e3));return W.set(Je,e,{expires:l})}function _t(){return W.remove(Je)}let wt=null;function Jl(e){wt=e}function Te(){return wt}const Wl={baseURL:"/api",withCredentials:!0,cacheEnable:!0},xt={title:"oms",fixedHeader:!1,sidebarLogo:!0,logo:"http://assest.daodao.run/logo.png",closeNavNotice:!1,navBarNotice:"",hasNewMessage:!0,showPageJsonSchema:!1,loginTips:"",sso:{},ElementPlus:{size:"default",zIndex:3e3,locale:ht},nav:[],whiteRoutes:["/login"],tokenExpire:10080*60*1e3,defaultAvatar:"http://assest.daodao.run/avatar.jpg",envColor:{uat:"gray",pre:"green"},serviceOffLineNotice:"å½“å‰é¡µé¢åŠŸèƒ½æ­£åœ¨ç»´æŠ¤, è¯·ç¨åå†è¯•~~~",formMutex:!0,captcha:!0,themeMode:"light"},Xe={axios:Wl,settings:xt,plugins:[],mock:!1},Xl=b.cloneDeep(xt),q=Re("settings",{state:()=>({...Xl}),actions:{updateSettings(e){b.merge(this,e)}}}),it={name:"",nickname:"",avatar:"",token:We(),customRouter:[],remoteRouter:[],menuRoutes:[],isLodeRemoteRoutes:!1,resource:{},roleIds:[],path:"",env:"",expired:!1},V=Re("user",{state:()=>({...it}),actions:{updateToken(e){this.token=e,zl(e)},removeToken(){this.token="",_t()},updateRemoteRouter(e){this.remoteRouter=e,this.isLodeRemoteRoutes=!0},setCustomRoutes(e){this.customRouter=this.customRouter.concat(e)},updateState({key:e,value:t}){this[e]=t},resetUser(){const e={...it,token:We()};Object.assign(this,e)},SET_EXPIRED(){this.expired=!this.expired},login(e){return new Promise((t,l)=>{const a=Te();if(!a){l("http client not init");return}a.request({url:"/user/login",method:"POST",data:e}).then(i=>{this.updateToken(i.data?.token||""),t(!0)}).catch(i=>l(i))})},logout(){this.removeToken(),this.resetUser()},info(){return new Promise((e,t)=>{const l=Te();if(!l){t("http client not init");return}l.request({url:"/user/info",method:"GET"}).then(a=>{const i=a.data?.role_ids||[];this.updateState({key:"name",value:a.data?.name}),this.updateState({key:"nickname",value:a.data?.nickname}),this.updateState({key:"roleIds",value:i}),this.updateState({key:"env",value:a.data?.env});const o=a.data?.website||{};q().updateSettings(o),!W.get("username")&&W.set("username",a.data?.name),e(!0)}).catch(a=>t(a))})},loadRemoteRoutes(){return new Promise((e,t)=>{Te()?.request({url:"/user/routes",method:"get"}).then(l=>{if(l.code===0){const a=l.data||[];e(a)}else t("error")}).catch(l=>{t(l)})})},SetExpired(){this.SET_EXPIRED()}}}),Ql={sidebar:{opened:W.get("sidebarStatus")?!!W.get("sidebarStatus"):!0,withoutAnimation:!1},device:"desktop",pages:{},currentRouteMeta:{},builderSchema:{},baseURL:""},ee=Re("app",{state:()=>({...Ql}),actions:{TOGGLE_SIDEBAR(){this.sidebar.opened=!this.sidebar.opened,this.sidebar.withoutAnimation=!1,W.set("sidebarStatus",this.sidebar.opened?"1":"0")},CLOSE_SIDEBAR(e){W.set("sidebarStatus","0"),this.sidebar.opened=!1,this.sidebar.withoutAnimation=e},TOGGLE_DEVICE(e){this.device=e},SET_PAGE_JSON_SCHEMA({page:e,json:t}){this.pages[e]=t},SET_CURRENT_META(e){this.currentRouteMeta=e},SET_BUILDER_SCHEMA(e){this.builderSchema=e},SET_BASE_API(e){this.baseURL=e},toggleSideBar(){this.TOGGLE_SIDEBAR()},closeSideBar({withoutAnimation:e}){this.CLOSE_SIDEBAR(e)},toggleDevice(e){this.TOGGLE_DEVICE(e)},setPageJsonSchema(e){this.SET_PAGE_JSON_SCHEMA(e)},setCurrentMeta(e){this.SET_CURRENT_META(e)},setBuilderSchema(e){this.SET_BUILDER_SCHEMA(e)},setBaseAPI(e){this.SET_BASE_API(e)}}}),$=tl();function Zl(e){e.use($)}const St="oms-theme",Et=O("light");let ot=!1,ve=null;function Yl(e){const t=ue(e??void 0);if(typeof window>"u")return t;const l=window.localStorage?.getItem(St);return l==="dark"||l==="light"?l:e==="dark"||e==="light"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}function ea(e){typeof window<"u"&&window.localStorage?.setItem(St,e)}function Ie(e){const t=ue(e);Et.value=t,Jt(t),Wt(t),ea(t)}function ta(e){if(typeof window>"u"||typeof window.matchMedia!="function"){ve=null;return}const t=window.matchMedia("(prefers-color-scheme: dark)"),l=a=>{const i=a.matches??t.matches;e(i?"dark":"light")};typeof t.addEventListener=="function"?t.addEventListener("change",l):t.addListener(l),ve=()=>{typeof t.removeEventListener=="function"?t.removeEventListener("change",l):t.removeListener(l),ve=null}}function Tt(){const e=q(),t=i=>{const o=ue(i);e.themeMode!==o?e.updateSettings({themeMode:o}):Ie(o)};if(!ot){ot=!0;const i=Yl(e.themeMode);ue(e.themeMode)!==i?e.updateSettings({themeMode:i}):Ie(i),jl(()=>e.themeMode,o=>{Ie(ue(o))},{immediate:!0}),ve?.(),ta(o=>{t(o)})}const l=x(()=>Et.value),a=x(()=>l.value==="dark");return{themeMode:l,isDark:a,setTheme:t,toggleTheme:()=>{t(a.value?"light":"dark")}}}const la=K({__name:"App",setup(e){return Tt(),ze(()=>{const t=document.getElementById("preloader");t!==null&&(document.body.removeChild(t),document.getElementById("preloader")?.remove(),Xt("test-icon","//at.alicdn.com/t/font_2246548_zclaqxwmzq8.css"),Qt(`.iconfont {
      font-size: 19px;
      font-style: normal;
      -webkit-font-smoothing: antialiased;
      font-family: iconfont !important;
    }`))}),window?.OmsOptions?.form?.vsPath&&Rl("vsPath",window?.OmsOptions?.form?.vsPath),(t,l)=>{const a=A("router-view");return n(),f(a)}}});var re=(e=>(e.GET="get",e.POST="post",e.DELETE="delete",e.FETCH="fetch",e.OPTION="option",e.PUT="put",e))(re||{});const aa=[{type:"jump",text:"è·³è½¬",target:"http://github.com/daodao97"},{type:"api",text:"è¯·æ±‚æ¥å£",target:"/test_api",extra:{method:"POST",url:"/test_api"},props:{type:"warning"}},{type:"table",text:"è¡¨æ ¼",extra:{infoApi:"/student/list_info",listApi:"/student/list"},props:{type:"info"}},[{type:"jump",text:"è·³è½¬",target:"http://github.com/daodao97"},{type:"api",text:"è¯·æ±‚æ¥å£",extra:{method:"POST",url:"/test_api"}}],{type:"form",text:"è¡¨å•",extra:{infoApi:"/form",saveApi:"/save"},props:{type:"success"}}];[...kl.cloneDeep(aa)];const ia={code:0,data:{"list|0-100":[{"id|0-1000":1,name:"@cname","sex|0-1":1,"score|0-100":60,link:"http://github.com/daodao97",image:"http://qupinapptest.oss-cn-beijing.aliyuncs.com/1/202002/d81d3c9dc7c3df7590d333f783a97995.jpeg",html:"<S>æ˜¾ç¤ºåˆ é™¤çº¿1</S>",json:{slogan:"å·¦æ‰‹ä»£ç å³æ‰‹è¯—"},richText:"åœ¨ä¸€æ®µæ–‡æœ¬ä¸­<çªå‡º|black|yellow>æ˜¾ç¤ºæŸäº›<æ–‡å­—|#ffffff|#000000>"}],page:{"count|1-10":2,"page|1-5":2}}},oa={listMock:ia},na=[{method:re.POST,url:"/login",response(e){return{code:0,data:{name:"daodao97",token:"xxxxxxx"}}}},{method:re.GET,url:"/user/info",response(e){return{code:0,data:{role_ids:[1],resource:[[0,20,"formItems","radio"],[0,1,2]]}}}},{url:"/user/routes",method:re.GET,response:e=>({code:0,data:[{id:0,label:"",routes:[]}]})},{url:"/user/list",method:re.GET,response:e=>oa.listMock}],sa=[...na],Ae={};function It(e){e.forEach(t=>{const l=Bt(t);Ae[`${t.method}::${l}`]=t})}It(sa);function Bt(e){let t=e.url,l=e.baseURL||Xe.axios?.baseURL;return l||(l=""),typeof t=="string"?(t=("/"+l+t).split("/").filter(a=>a).join("/"),t+="(|\\?.*)$",new RegExp(t)):t}function ra(){Object.keys(Ae).forEach(e=>{const t=Ae[e],l=Bt(t);Se.mock(l,t.method,function(a){const{url:i,type:o,body:s}=a,p=Zt(i),c=s?JSON.parse(s):{},h=t.response({query:p,data:c}),m=Se.mock(h);return Yt(i,{type:o,query:p,data:c,response:m}),Se.mock(m)})})}const pa=bt,nt=ft,ua=Ue.CancelToken,ge={taskList:{},cacheList:new Map,uniqueId(e){return`${location.href}|${e.method}|${e.url}|`},addTask(e,t){const l=this.uniqueId(e);this.taskList[l]=t},delTask(e){const t=this.uniqueId(e),l=this.taskList[t];l&&l(e)},pending(e){const t=this.uniqueId(e);return!!this.taskList[t]},cache(e){const t=this.uniqueId(e),l=this.cacheList.get(t);if(l){if(l.expirationTime<new Date().getTime()){this.delCache(e);return}return l.response,l.response}},addCache(e,t){const l=this.uniqueId(e),a=e.cacheTime||0;a&&this.cacheList.set(l,{response:t,expirationTime:new Date().getTime()+a})},delCache(e){const t=this.uniqueId(e);return this.cacheList.delete(t)}},da={onFulfilled:function(e){return e.cacheEnable===!1||(ge.pending(e)&&ge.delTask(e),e.cancelToken=new ua(t=>{ge.addTask(e,t)})),e},onRejected(e){return Promise.reject(e)}},ca={onFulfilled:function(e){return e.config.cacheEnable===!1||e.config.method==="get"&&Object.keys(e.data).length>0&&ge.addCache(e.config,e.data),e},onRejected(e){return Promise.reject(e)}},Ot={};function Fn(e,t){Ot[e]=t}function ma(e){return Ot[e]}const ha=K({name:"Dashboard",setup(){const e=ma("dashboard");if(e)return()=>u("span",null,[u(e,null,null)]);const t=x(()=>V().name);return()=>u("div",{class:"dashboard-container"},[u("div",{class:"dashboard-text"},[I("Hi "),t.value,I(" ğŸ˜„")])])}}),D=(e,t)=>{const l=e.__vccOpts||e;for(const[a,i]of t)l[a]=i;return l},fa=D(ha,[["__scopeId","data-v-85165680"]]),ba={data(){return{levelList:null}},watch:{$route(){this.getBreadcrumb()}},created(){this.getBreadcrumb()},methods:{getBreadcrumb(){let e=this.$route.matched.filter(l=>l.meta&&l.meta.title);const t=e[0];this.isDashboard(t)||(e=[{path:"/dashboard",meta:{title:"Dashboard"}}].concat(e)),this.levelList=e.filter(l=>l.meta&&l.meta.title&&l.meta.breadcrumb!==!1)},isDashboard(e){const t=e&&e.name;return t?t.trim().toLocaleLowerCase()==="Dashboard".toLocaleLowerCase():!1},pathCompile(e){const{params:t}=this.$route;return El.compile(e)(t)},handleLink(e){const{redirect:t,path:l}=e;if(t){this.$router.push(t);return}this.$router.push(this.pathCompile(l))}}},ya={key:0,class:"no-redirect"},va=["onClick"];function ga(e,t,l,a,i,o){const s=ml,p=hl;return n(),f(p,{class:"app-breadcrumb",separator:"/"},{default:r(()=>[u(Gl,{name:"breadcrumb"},{default:r(()=>[(n(!0),y(P,null,N(i.levelList,(c,h)=>(n(),f(s,{key:c.path},{default:r(()=>[c.path.indexOf("/DIR_")===0&&c.redirect===void 0||h===i.levelList.length-1?(n(),y("span",ya,j(c.meta.title),1)):(n(),y("a",{key:1,onClick:m=>o.handleLink(c)},j(c.meta.title),9,va))]),_:2},1024))),128))]),_:1})]),_:1})}const ka=D(ba,[["render",ga],["__scopeId","data-v-fa74804e"]]),_a={name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},emits:["toggle-click"],methods:{toggleClick(){this.$emit("toggle-click")}}};function wa(e,t,l,a,i,o){const s=A("v-icon");return n(),y("div",{style:{padding:"0 15px"},onClick:t[0]||(t[0]=(...p)=>o.toggleClick&&o.toggleClick(...p))},[u(s,{class:Q({"is-active":l.isActive}),name:"ra-leftalignment"},null,8,["class"])])}const xa=D(_a,[["render",wa]]),Sa={};function Ea(e,t){const l=ne,a=fl,i=bl,o=yl;return n(),f(o,{style:{width:"100%",height:"100%"}},{default:r(()=>[u(l,{class:"aside"},{default:r(()=>[de(e.$slots,"left-aside",{},void 0,!0)]),_:3}),u(a,{class:"main",style:{margin:"0 10px"}},{default:r(()=>[de(e.$slots,"main",{},void 0,!0)]),_:3}),u(i,{class:"aside",width:"350px",style:{padding:"20px"}},{default:r(()=>[de(e.$slots,"right-aside",{},void 0,!0)]),_:3})]),_:3})}const Ct=D(Sa,[["render",Ea],["__scopeId","data-v-7c3d697b"]]),Ta={type:"input",name:"æ–‡æœ¬æ¡†",default:{type:"input",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"number",field:"maxlength",label:"æœ€å¤§å­—ç¬¦æ•°"},{type:"icon-select",field:"prefixIcon",label:"å‰ç½®ICON"},{type:"icon-select",field:"suffixIcon",label:"åç½®ICON"},{type:"switch",field:"showCopy",label:"å¤åˆ¶"},{type:"switch",field:"disabled",label:"ç¦ç”¨"},{type:"switch",field:"showWordLimit",label:"æ˜¾ç¤ºé™åˆ¶è¯æ•°"},{type:"input",field:"mask",label:"mask",info:'<a href="https://github.com/RobinHerbots/Inputmask" target="_blank" class="el-link el-link--primary">æ–‡æ¡£</a>'}]}}]},Ia={type:"number",name:"æ•°å­—",default:{type:"number",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"number",field:"min",label:"æœ€å°å€¼"},{type:"number",field:"man",label:"æœ€å¤§å€¼"}]}}]},Ba={type:"number-range",name:"æ•°å­—åŒºé—´",default:{type:"number-range",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"props",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"unit",label:"å•ä½"},{type:"switch",field:"disabled",label:"ç¦ç”¨"}]}}]},Oa={type:"select",name:"ä¸‹æ‹‰æ¡†",default:{type:"select",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"radio",field:"optionType",label:"å¤‡é€‰é¡¹ç±»å‹",value:0,options:[{value:0,label:"local"},{value:1,label:"remote"}]},{type:"sub-form",field:"options",label:"å¤‡é€‰é¡¹",props:{repeat:!0,options:{labelPosition:"top"},formItems:[{type:"input",field:"value",label:"value"},{type:"input",field:"label",label:"label"}]},depend:{field:"optionType",value:0}},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"selectApi",label:"å¤‡é€‰é¡¹æ¥å£",depend:{field:".optionType",value:1}},{type:"switch",field:"multiple",label:"å¤šé€‰"},{type:"number",field:"multipleLimit",label:"æœ€å¤§é€‰ä¸­æ•°",depend:{field:"multiple",value:!0}},{type:"switch",field:"allowCreate",label:"å…è®¸åˆ›å»º"},{type:"switch",field:"filterable",label:"å…è®¸è¿‡æ»¤"}]}}],trans(e){const t=b.cloneDeep(e);return e.optionType===0?t.props&&t.props.selectApi!==void 0&&delete t.props.selectApi:e.optionType===1&&t.options&&delete t.options,delete t.optionType,t}},Ca={type:"radio",name:"å•é€‰æ¡†",default:{type:"radio",label:"label",field:"field_name",options:[]},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"options",label:"å¤‡é€‰é¡¹",props:{formItems:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"value",label:"å­—æ®µå€¼"}],repeat:!0}},{type:"input",field:"default",label:"é»˜è®¤å€¼"}]},Pa={type:"switch",name:"å¼€å…³",default:{type:"switch",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"props",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"activeText",label:"æ‰“å¼€æ—¶çš„æ–‡å­—æè¿°"},{type:"input",field:"inactiveText",label:"å…³é—­æ—¶çš„æ–‡å­—æè¿°"},{type:"color",field:"activeColor",label:"æ‰“å¼€æ—¶çš„èƒŒæ™¯è‰²"},{type:"color",field:"inactiveColor",label:"å…³é—­æ—¶çš„èƒŒæ™¯è‰²"},{type:"switch",field:"disabled",label:"ç¦ç”¨"}]}}]},Da={type:"code",name:"Code",default:{type:"code",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"}]},Aa={type:"json",name:"json",default:{type:"json",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"}]},La={type:"upload",name:"ä¸Šä¼ ",default:{type:"upload",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"}]},$a={type:"template",name:"è‡ªå®šä¹‰ç»„ä»¶",default:{type:"template",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"}]},Ma={type:"icon-select",name:"å›¾æ ‡é€‰æ‹©å™¨",default:{type:"icon-select",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"}]},ja={type:"sub-form",name:"å­è¡¨å•",default:{type:"sub-form",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"switch",field:"repeat",label:"å¯é‡å¤"},{type:"sub-form",field:"form-items",label:"å­è¡¨å•æ§ä»¶",props:{options:{labelPosition:"top"},repeat:!0,formItems:[{type:"input",field:"label",label:"label"},{type:"select",field:"type",label:"ç±»å‹",options:[{value:"input",label:"æ–‡æœ¬æ¡†"}]}]}},{type:"switch",field:"disabled",label:"ç¦ç”¨"}]}}]},Ra={type:"checkbox",name:"å¤é€‰æ¡†",default:{type:"checkbox",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"props",props:{options:{labelPosition:"top"},formItems:[{type:"number",field:"max",label:"æœ€å¤§é€‰ä¸­æ•°"},{type:"number",field:"min",label:"æœ€å°é€‰ä¸­æ•°"},{type:"switch",field:"disabled",label:"ç¦ç”¨"}]}}]},Pt={};function F(e){Pt[e.type]=e}F(Ta);F(Oa);F(Ia);F(Ba);F(Pa);F(ja);F(Ca);F(Ra);F(Da);F(Aa);F(La);F(Ma);F($a);const Le=Pt,Na={options:{labelPosition:"top",submitButton:!1,cancelButton:!1},formItems:[{type:"input",field:"saveApi",label:"ä¿å­˜æ¥å£"},{type:"switch",field:"inline",label:"è¡Œå¸ƒå±€"},{type:"radio",field:"labelPosition",label:"labelä½ç½®",options:[{value:"right",label:"å³"},{value:"left",label:"å·¦"},{value:"top",label:"ä¸Š"}]},{type:"input",field:"labelWidth",label:"labelå®½åº¦",value:"100px"},{type:"switch",field:"showSubmitButton",label:"æ˜¾ç¤ºæäº¤æŒ‰é’®",value:!0},{type:"sub-form",field:"submitButton",label:"æäº¤æŒ‰é’®",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"text",label:"æ–‡æ¡ˆ",value:"æäº¤"},{type:"select",field:"type",label:"æŒ‰é’®ç±»å‹",options:[{value:"primary",label:"primary"}]}]}},{type:"switch",field:"showCancelButton",label:"æ˜¾ç¤ºå–æ¶ˆæŒ‰é’®",value:!0},{type:"sub-form",field:"cancelButton",label:"å–æ¶ˆæŒ‰é’®",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"text",label:"æ–‡æ¡ˆ",value:"å–æ¶ˆ"},{type:"select",field:"type",label:"æŒ‰é’®ç±»å‹",options:[{value:"primary",label:"primary"}]}]}}]},Be={labelPosition:"top",submitButton:!1,cancelButton:!1},Qe=[];Object.keys(Le).forEach(e=>{Qe.push({value:e,label:Le[e].name})});const Va={options:{submitButton:!1,cancelButton:!1},formItems:[{type:"sub-form",field:"columns",props:{repeat:!0,formItems:[{type:"input",field:"field",label:"å­—æ®µkey"},{type:"select",field:"type",label:"ç±»å‹",options:b.cloneDeep(Qe)},{type:"input",field:"label",label:"å­—æ®µlabel"}]}}]},qa={components:{DevLayout:Ct,VForm:te,VButton:Fe,JsonView:Ge},props:{schema:{type:Object,default:e=>{}}},data(){return{sqlOptions:{},sqlSchema:Va,baseSchema:Na,activeTab:"base",builderSchema:Object.assign({},this.$props.schema,{options:{submitButton:!1,cancelButton:!1}}),baseOptions:{},key:0,ctrlKey:0,activeCtrl:void 0,ctrlOptions:{},ctrlSchema:{},ctrlName:"",activeIndex:void 0,ctrlMap:Le,activeIndexReg:/(formItems)?\[(\d+)\]/,tableStruct:"",activeName:"1",currentCtrlType:"input",types:b.cloneDeep(Qe)}},computed:{getSaveSchema(){return{formItems:this.builderSchema.formItems}}},watch:{baseOptions:{deep:!0,immediate:!0,handler(e){const t=b.cloneDeep(e);e.showSubmitButton===!1&&(t.submitButton=!1),e.cancelSubmitButton===!1&&(t.cancelButton=!1),delete t.showSubmitButton,delete t.showCancelButton,Object.keys(t).length>0&&(this.builderSchema=b.merge(this.builderSchema,{options:t}),this.key++)}},ctrlOptions:{deep:!0,handler(e){const t=b.get(this.builderSchema,this.activeIndex);if(!t)return;const l=t?t.type:"",a=this.ctrlMap[l],i=a.trans?a.trans(e):e;if(i&&Object.keys(i).length>0){if(i.type=l,this.activeIndex.indexOf("[")>-1){const[o,s,p]=this.activeIndex.match(/(\w+)\[(\d+)\]/);this.builderSchema[s][p]={...i}}else this.builderSchema[this.activeIndex]=i;this.key++}}},currentCtrlType:{handler(e){const t=this.ctrlMap[e];this.ctrlSchema=b.cloneDeep({options:b.cloneDeep(Be),formItems:b.cloneDeep(t.builder)});const l=b.get(this.builderSchema,this.activeIndex);this.ctrlOptions=b.cloneDeep(l),this.ctrlOptions.type=e,this.ctrlKey++,this.key++}}},beforeCreate(){ae.on("dev-action",({event:e,data:t})=>{this.onDevAction(t.type,t.devId)})},unmounted(){ae.off("dev-action")},methods:{onDevAction(e,t){this.activeIndex="formItems"+t,e==="edit"&&(this.activeTab="ctrl",this.clicklabel()),e==="del"&&(this.activeTab="base",this.removeOne()),this.ctrlKey++},push(e){const t="formItems";this.ctrlOptions={},this.builderSchema[t]=this.builderSchema[t]||[];const l=this.ctrlMap[e];this.activeCtrl=l,this.builderSchema[t].push(b.cloneDeep(l.default)),this.ctrlSchema=b.cloneDeep({options:b.cloneDeep(Be),formItems:b.cloneDeep(l.builder)}),this.ctrlKey++,this.key++,this.activeIndex=`${t}[${this.builderSchema[t].length-1}]`,this.activeTab="ctrl"},removeOne(){b.unset(this.builderSchema,this.activeIndex),this.builderSchema=b.cloneDeep(ct(this.builderSchema)),this.activeIndex="",this.ctrlOptions={},this.ctrlSchema={},this.key++,this.ctrlKey++},clicklabel(){const e=this.activeIndex;if(e.match(this.activeIndexReg)){const t=b.cloneDeep(b.get(this.builderSchema,e)),l=t.type,a=this.ctrlMap[l];if(!a){this.$message({type:"warning",message:"å°šæœªæ”¯æŒè¯¥ç»„ä»¶çš„UIç¼–è¾‘"});return}this.currentCtrlType=l,this.ctrlOptions=t,this.ctrlSchema=b.cloneDeep({options:b.cloneDeep(Be),formItems:b.cloneDeep(a.builder)}),this.ctrlKey++}},saveSchema(){this.$http.request({method:"POST",url:"/devtool/page_schema",data:{formItems:this.builderSchema.formItems}}).then(({data:e})=>{e&&this.$message({type:"success",message:"ä¿å­˜æˆåŠŸ, è¯·åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœ"})})}}};function Ua(e,t,l,a,i,o){const s=A("v-form"),p=kt,c=ke,h=A("JsonView"),m=A("VButton"),g=Ne,v=Ve,T=gt,S=vt,w=A("dev-layout");return n(),f(w,null,{main:r(()=>[i.builderSchema.formItems?(n(),f(s,X({ref:"form",key:i.key,dev:!0},i.builderSchema),null,16)):C("",!0),u(p),u(c,{type:"primary",onClick:o.saveSchema},{default:r(()=>[...t[2]||(t[2]=[I("ä¿å­˜é¡µé¢é…ç½®",-1)])]),_:1},8,["onClick"]),t[3]||(t[3]=I(" Â Â  ",-1)),u(m,{text:"PageSchema",type:"modal"},{default:r(()=>[u(h,{data:o.getSaveSchema},null,8,["data"])]),_:1})]),"right-aside":r(()=>[i.activeIndex?(n(),f(S,{key:0},{default:r(()=>[u(T,{label:"æ§ä»¶ç±»å‹"},{default:r(()=>[u(v,{modelValue:i.currentCtrlType,"onUpdate:modelValue":t[0]||(t[0]=_=>i.currentCtrlType=_)},{default:r(()=>[(n(!0),y(P,null,N(i.types,(_,E)=>(n(),f(g,{key:E,label:_.label,value:_.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):C("",!0),(n(),f(s,X({key:i.ctrlKey,modelValue:i.ctrlOptions,"onUpdate:modelValue":t[1]||(t[1]=_=>i.ctrlOptions=_)},i.ctrlSchema),null,16,["modelValue"]))]),_:1})}const Fa=D(qa,[["render",Ua],["__scopeId","data-v-875f0171"]]),Ga={type:"input",name:"æ–‡æœ¬æ¡†",default:{type:"input",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"number",field:"maxlength",label:"æœ€å¤§å­—ç¬¦æ•°"},{type:"switch",field:"showWordLimit",label:"æ˜¾ç¤ºé™åˆ¶è¯æ•°"},{type:"input",field:"mask",label:"mask",info:'<a href="https://github.com/RobinHerbots/Inputmask" target="_blank" class="el-link el-link--primary">æ–‡æ¡£</a>'}]}}]},Ha={type:"select",name:"ä¸‹æ‹‰æ¡†",default:{type:"select",label:"label",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"radio",field:"optionType",label:"å¤‡é€‰é¡¹ç±»å‹",value:0,options:[{value:0,label:"local"},{value:1,label:"remote"}]},{type:"sub-form",field:"options",label:"å¤‡é€‰é¡¹",props:{repeat:!0,options:{labelPosition:"top"},formItems:[{type:"input",field:"value",label:"value"},{type:"input",field:"label",label:"label"}]},depend:{field:"optionType",value:0}},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"selectApi",label:"å¤‡é€‰é¡¹æ¥å£",depend:{field:".optionType",value:1}},{type:"switch",field:"multiple",label:"å¤šé€‰"},{type:"number",field:"multipleLimit",label:"æœ€å¤§é€‰ä¸­æ•°",depend:{field:"multiple",value:!0}},{type:"switch",field:"filterable",label:"å…è®¸è¿‡æ»¤"}]}}],trans(e){const t=b.cloneDeep(e);return e.optionType===0?t.props&&t.props.selectApi!==void 0&&delete t.props.selectApi:e.optionType===1&&t.options&&delete t.options,delete t.optionType,t}},Ka={type:"date",name:"æ—¥æœŸ",default:{type:"date",label:"æ—¶é—´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"}]},st={options:{labelPosition:"top",submitButton:!1,cancelButton:!1},formItems:[{type:"switch",field:"showFilter",label:"æœç´¢æ¡ä»¶",value:!0},{type:"switch",field:"showPagination",label:"é¡µç ",value:!0},{type:"switch",field:"exportAble",label:"å¯¼å‡ºæŒ‰é’®"}]},Oe={labelPosition:"top",submitButton:!1,cancelButton:!1},za={type:"span",name:"æ–‡æœ¬",default:{type:"span",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"},{type:"switch",field:"sortable",label:"æ’åº"}]},Ja={type:"enum",name:"æ ‡ç­¾",default:{type:"enum",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"},{type:"sub-form",field:"options",label:"æ˜ å°„",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"value",label:"value"},{type:"input",field:"label",label:"label"}]},value:[]}],trans(e){return e.options=e.options||[],e.label||(e.label="è¡¨å¤´"),e}},Wa={type:"html",name:"HTML",default:{type:"html",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"}]},Xa={type:"icon",name:"å›¾æ ‡",default:{type:"icon",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"}]},Qa={type:"image",name:"å›¾ç‰‡",default:{type:"image",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"}]},Za={type:"json",name:"JSON",default:{type:"json",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"}]},Ya={type:"link",name:"é“¾æ¥",default:{type:"link",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"}]},ei={type:"rich",name:"å¯Œæ–‡æœ¬",default:{type:"rich",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"}]},ti={type:"tpl",name:"æ¨¡æ¿",default:{type:"tpl",label:"è¡¨å¤´",field:"field_name"},builder:[{type:"input",field:"label",label:"å­—æ®µå"},{type:"input",field:"field",label:"å­—æ®µkey"},{type:"input",field:"info",label:"æç¤º"},{type:"input",field:"tpl",label:"æ¨¡æ¿",info:"ä¾‹å¦‚ <code>å§“å: {name} å¹´é¾„:{age}</code>"}]},li={span:za,enum:Ja,html:Wa,icon:Xa,image:Qa,json:Za,link:Ya,rich:ei,tpl:ti},ai={type:"jump",name:"è·³è½¬",default:{type:"jump",target:"",text:"æŒ‰é’®"},builder:[{type:"input",field:"target",label:"è·³è½¬åœ°å€",info:"å¯ä»¥æ˜¯æœ¬åœ°è·¯ç”±, ä¹Ÿå¯ä»¥æ˜¯url"},{type:"input",field:"text",label:"æ–‡æ¡ˆ"},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"icon-select",field:"icon",label:"å›¾æ ‡"},{type:"select",field:"type",label:"ç±»å‹",options:[{value:"primary",label:"primary"},{value:"info",label:"info"}]}]}}]},ii={type:"api",name:"æ¥å£è¯·æ±‚",default:{type:"api",target:"",text:"è¯·æ±‚"},builder:[{type:"input",field:"target",label:"APIåœ°å€",info:"æ­¤å¤„å¡«å†™æ¥å£pathå³å¯"},{type:"input",field:"text",label:"æ–‡æ¡ˆ"},{type:"sub-form",field:"props",label:"å±æ€§",props:{options:{labelPosition:"top"},formItems:[{type:"input",field:"text",label:"æ–‡æ¡ˆ"},{type:"icon-select",field:"icon",label:"å›¾æ ‡"},{type:"select",field:"type",label:"ç±»å‹",options:[{value:"primary",label:"primary"},{value:"info",label:"info"}]},{type:"input",field:"api",label:"APIåœ°å€",info:"æ­¤å¤„å¡«å†™æ¥å£pathå³å¯"},{type:"select",field:"method",label:"è¯·æ±‚ç±»å‹",options:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"DELETE",label:"DELETE"},{value:"PUT",label:"PUT"}]}]}}]},oi={type:"form",name:"å¼¹æ¡†è¡¨å•",default:{type:"form",target:"",text:"å¼¹æ¡†è¡¨å•"},builder:[{type:"input",field:"text",label:"æ–‡æ¡ˆ"},{type:"radio",field:"container",label:"æ¨¡å¼",options:[{value:"dialog",label:"æ¨¡æ€æ¡†"},{value:"drawer",label:"æŠ½å±‰"}],value:"dialog"},{type:"radio",field:"schema_type",label:"è¡¨å•ç±»å‹",options:[{value:0,label:"æœ¬åœ°"},{value:1,label:"è¿œç¨‹"}],value:1},{type:"input",field:"infoApi",label:"formSchemaæ¥å£",depend:{field:"schema_type",value:1}},{type:"json",field:"form-items",label:"è¡¨å•æ§ä»¶"},{type:"input",field:"saveApi",label:"ä¿å­˜æ¥å£"}]},ni={type:"table",name:"å¼¹æ¡†åˆ—è¡¨",default:{type:"form",target:"",text:"å¼¹æ¡†è¡¨å•"},builder:[{type:"input",field:"text",label:"æ–‡æ¡ˆ"},{type:"radio",field:"container",label:"æ¨¡å¼",options:[{value:"dialog",label:"æ¨¡æ€æ¡†"},{value:"drawer",label:"æŠ½å±‰"}],value:"dialog"},{type:"radio",field:"schema_type",label:"è¡¨å•ç±»å‹",options:[{value:0,label:"æœ¬åœ°"},{value:1,label:"è¿œç¨‹"}],value:1},{type:"input",field:"infoApi",label:"formSchemaæ¥å£",depend:{field:"schema_type",value:1}},{type:"json",field:"form-items",label:"è¡¨å•æ§ä»¶"},{type:"input",field:"saveApi",label:"ä¿å­˜æ¥å£"}]},si={jump:ai,api:ii,form:oi,table:ni},ri={components:{JsonView:Ge,DevLayout:Ct,VTable:ce,VForm:te,VButton:Fe},props:{schema:{type:Object,default:e=>{}}},data(){const e=$l(this.$props.schema);return delete e.listApi,e.list=[{}],{baseSchema:st,activeTab:"base",builderSchema:Object.assign({},st,e),baseOptions:{},key:0,ctrlKey:0,activeCtrl:void 0,activeBrick:void 0,ctrlOptions:{},ctrlSchema:{},ctrlName:"",activeIndex:void 0,ctrlMap:{filter:{input:Ga,select:Ha,date:Ka},headers:li,buttons:si},activeIndexReg:/(filter|headers|normalButton|batchButton|rowButton)?\[(\d+)\]/,currentCtrlType:"input"}},computed:{types(){const e=[],t=this.ctrlMap[this.activeBrick];return Object.keys(t).forEach(l=>{e.push({value:l,label:t[l].name})}),e},getSaveSchema(){return{filter:this.builderSchema.filter,headers:this.builderSchema.headers,rowButton:this.builderSchema.rowButton,normalButton:this.builderSchema.normalButton,batchButton:this.builderSchema.batchButton}},currentBuilderSchema(){return this.$pinia?.state?.value?.app?.builderSchema}},watch:{baseOptions:{deep:!0,immediate:!0,handler(e){this.builderSchema=b.merge(this.builderSchema,e),this.key++,this.updateBuilderSchema()}},ctrlOptions:{deep:!0,handler(e){const t=this.activeIndex.match(this.activeIndexReg);if(!t)return;let l=this.builderSchema[t[1]][parseInt(t[2])].type;t[1]==="headers"&&l===void 0&&(l="span");const a=this.ctrlMap[this.activeBrick][l];if(!a)return;const i=a.trans?a.trans(e):e;if(i&&Object.keys(i).length>0){if(i.type=l,this.activeIndex.indexOf("[")>-1){const[o,s,p]=this.activeIndex.match(/(\w+)\[(\d+)\]/);this.builderSchema[s][p]={...i}}else this.builderSchema[this.activeIndex]=i;this.key++}this.updateBuilderSchema()}},currentCtrlType:{handler(e){const t=this.ctrlMap[this.activeBrick][e];this.ctrlSchema=b.cloneDeep({options:b.cloneDeep(Oe),formItems:b.cloneDeep(t.builder)});const l=b.get(this.builderSchema,this.activeIndex);l.type=e;const a=b.cloneDeep(l);this.ctrlOptions=a,a.text&&(this.ctrlOptions.text=a.text,this.ctrlOptions.props=a.props||{}),this.ctrlKey++,this.key++,this.updateBuilderSchema()}}},beforeCreate(){ae.on("dev-action",({event:e,data:t})=>{this.onDevAction(t.type,t.devId)})},unmounted(){ae.off("dev-action")},methods:{updateBuilderSchema(){const e=this.$pinia?._s?.get("app")||null;e&&e.setBuilderSchema&&e.setBuilderSchema(this.builderSchema)},onDevAction(e,t){this.activeIndex=t,e==="edit"&&(this.activeTab="ctrl",this.clicklabel()),e==="del"&&(this.activeTab="base",this.removeOne()),this.ctrlKey++},pushFilter(e){this.push(e,"filter","filter","filter")},pushHeaders(e){this.push(e,"headers","headers","headers")},pushNormalButton(e){this.push(e,"normalButton","buttons","buttons")},pushBatchButton(e){this.push(e,"batchButton","buttons","buttons")},pushRowButton(e){this.push(e,"rowButton","buttons","buttons")},push(e,t,l,a){const i=this.ctrlMap[l];if(!i[e]){this.$message({type:"warning",message:"å°šæœªæ”¯æŒæ­¤ç»„ä»¶çš„UIç¼–è¾‘"});return}this.activeCtrl=i[e],this.activeBrick=a,this.ctrlOptions={},this.builderSchema[t]=this.builderSchema[t]||[],this.builderSchema[t].push(b.cloneDeep(i[e].default)),this.ctrlSchema=b.cloneDeep({options:b.cloneDeep(Oe),formItems:b.cloneDeep(i[e].builder)}),this.key++,this.ctrlKey++,this.activeIndex=`${t}[${this.builderSchema[t].length-1}]`,this.activeTab="ctrl"},removeOne(){b.unset(this.builderSchema,this.activeIndex),this.builderSchema=b.cloneDeep(ct(this.builderSchema)),this.activeIndex="",this.ctrlOptions={},this.ctrlSchema={},this.key++,this.ctrlKey++},clicklabel(){const e=this.activeIndex,t=e.match(this.activeIndexReg);if(t){const l=b.cloneDeep(b.get(this.builderSchema,e));this.activeBrick=t[1],["normalButton","batchButton","rowButton"].indexOf(t[1])>-1&&(this.activeBrick="buttons");let a=this.builderSchema[t[1]][parseInt(t[2])].type;t[1]==="headers"&&a===void 0&&(a="span");const i=this.ctrlMap[this.activeBrick][a];if(!i){this.activeBrick,this.$message({type:"warning",message:"å°šæœªæ”¯æŒæ­¤ç»„ä»¶çš„UIç¼–è¾‘"});return}this.ctrlOptions=l,this.currentCtrlType=a,this.ctrlSchema=b.cloneDeep({options:b.cloneDeep(Oe),formItems:b.cloneDeep(i.builder)}),this.ctrlKey++}},saveSchema(){const{filter:e,headers:t,rowButton:l,normalButton:a,batchButton:i}=this.currentBuilderSchema;this.$http.request({method:"POST",url:"/devtool/page_schema",data:{filter:e,headers:t,rowButton:l,normalButton:a,batchButton:i}}).then(({data:o})=>{o&&this.$message({type:"success",message:"ä¿å­˜æˆåŠŸ, è¯·åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœ"})})}}};function pi(e,t,l,a,i,o){const s=me,p=ke,c=ne,h=A("v-table"),m=kt,g=ke,v=A("JsonView"),T=A("VButton"),S=Ne,w=Ve,_=gt,E=vt,G=A("v-form"),L=A("dev-layout");return n(),f(L,null,{"left-aside":r(()=>[u(c,{style:{width:"200px"}},{default:r(()=>[u(c,null,{default:r(()=>[u(s,{class:"title","data-id":22222},{default:r(()=>[...t[5]||(t[5]=[I("æ·»åŠ æœç´¢æ¡ä»¶",-1)])]),_:1}),u(s,{class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn",onClick:t[0]||(t[0]=B=>o.pushFilter("input"))},{default:r(()=>[...t[6]||(t[6]=[I("æ–‡æœ¬æ¡†",-1)])]),_:1})]),_:1}),u(s,{class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn",onClick:t[1]||(t[1]=B=>o.pushFilter("select"))},{default:r(()=>[...t[7]||(t[7]=[I("ä¸‹æ‹‰æ¡†",-1)])]),_:1})]),_:1}),u(s,{class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn",onClick:t[2]||(t[2]=B=>o.pushFilter("date"))},{default:r(()=>[...t[8]||(t[8]=[I("æ—¥æœŸ",-1)])]),_:1})]),_:1})]),_:1}),u(c,null,{default:r(()=>[u(s,{class:"title"},{default:r(()=>[...t[9]||(t[9]=[I("æ·»åŠ åˆ—è¡¨é¡¹",-1)])]),_:1}),(n(!0),y(P,null,N(Object.keys(i.ctrlMap.headers),(B,U)=>(n(),f(s,{key:`column-${U}`,class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn",onClick:z=>o.pushHeaders(i.ctrlMap.headers[B].type)},{default:r(()=>[I(j(i.ctrlMap.headers[B].name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),u(c,null,{default:r(()=>[u(s,{class:"title"},{default:r(()=>[...t[10]||(t[10]=[I("æ·»åŠ è¡ŒæŒ‰é’®",-1)])]),_:1}),(n(!0),y(P,null,N(Object.keys(i.ctrlMap.buttons),(B,U)=>(n(),f(s,{key:`column-${U}`,class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn",onClick:z=>o.pushRowButton(i.ctrlMap.buttons[B].type)},{default:r(()=>[I(j(i.ctrlMap.buttons[B].name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),u(c,null,{default:r(()=>[u(s,{class:"title"},{default:r(()=>[...t[11]||(t[11]=[I("æ·»åŠ å¸¸è§„æŒ‰é’®",-1)])]),_:1}),(n(!0),y(P,null,N(Object.keys(i.ctrlMap.buttons),(B,U)=>(n(),f(s,{key:`column-${U}`,class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn",onClick:z=>o.pushNormalButton(i.ctrlMap.buttons[B].type)},{default:r(()=>[I(j(i.ctrlMap.buttons[B].name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128)),u(s,{class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn"},{default:r(()=>[...t[12]||(t[12]=[I("æŒ‰é’®ç»„",-1)])]),_:1})]),_:1})]),_:1}),u(c,null,{default:r(()=>[u(s,{class:"title"},{default:r(()=>[...t[13]||(t[13]=[I("æ·»åŠ æ‰¹é‡æŒ‰é’®",-1)])]),_:1}),(n(!0),y(P,null,N(Object.keys(i.ctrlMap.buttons),(B,U)=>(n(),f(s,{key:`column-${U}`,class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn",onClick:z=>o.pushBatchButton(i.ctrlMap.buttons[B].type)},{default:r(()=>[I(j(i.ctrlMap.buttons[B].name),1)]),_:2},1032,["onClick"])]),_:2},1024))),128)),u(s,{class:"ctrl"},{default:r(()=>[u(p,{class:"ctrl-btn"},{default:r(()=>[...t[14]||(t[14]=[I("æŒ‰é’®ç»„",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),main:r(()=>[(n(),f(h,X({ref:"table",key:i.key,dev:!0},i.builderSchema),null,16)),u(m),u(g,{type:"primary",onClick:o.saveSchema},{default:r(()=>[...t[15]||(t[15]=[I("ä¿å­˜é¡µé¢é…ç½®",-1)])]),_:1},8,["onClick"]),t[16]||(t[16]=I(" Â Â  ",-1)),u(T,{text:"PageSchema",type:"modal"},{default:r(()=>[u(v,{data:o.getSaveSchema},null,8,["data"])]),_:1})]),"right-aside":r(()=>[i.activeIndex?(n(),f(E,{key:0},{default:r(()=>[u(_,{label:"æ§ä»¶ç±»å‹"},{default:r(()=>[u(w,{modelValue:i.currentCtrlType,"onUpdate:modelValue":t[3]||(t[3]=B=>i.currentCtrlType=B)},{default:r(()=>[(n(!0),y(P,null,N(o.types,(B,U)=>(n(),f(S,{key:U,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})):C("",!0),(n(),f(G,X({key:i.ctrlKey,modelValue:i.ctrlOptions,"onUpdate:modelValue":t[4]||(t[4]=B=>i.ctrlOptions=B)},i.ctrlSchema),null,16,["modelValue"]))]),_:1})}const ui=D(ri,[["render",pi],["__scopeId","data-v-cd18f87f"]]),di="rtl",ci={__name:"PageEditor",setup(e){const t=O(!1);O(1);const l=Z(),a=ee(),i=x(()=>a.pages[l.path]);return(o,s)=>{const p=A("VIcon"),c=yt;return n(),y(P,null,[u(p,{name:"ra-set",onClick:s[0]||(s[0]=h=>t.value=!d(t))}),u(c,{modelValue:d(t),"onUpdate:modelValue":s[1]||(s[1]=h=>He(t)?t.value=h:null),title:"é¡µé¢è®¾è®¡",class:"my-drawer",direction:di,size:"90%","destroy-on-close":"","append-to-body":""},{default:r(()=>[d(i).formItems!==void 0?(n(),f(Fa,{key:0,schema:d(i)},null,8,["schema"])):C("",!0),d(i).headers!==void 0?(n(),f(ui,{key:1,schema:d(i)},null,8,["schema"])):C("",!0)]),_:1},8,["modelValue"])],64)}}},mi={class:"right-content"},hi={key:0,class:"right-item"},fi={class:"right-item-button",style:{padding:"0"}},bi={class:"user-info"},yi=["src"],vi={class:"user-name"},gi=K({__name:"Navbar",setup(e){const t=ee(),l=q(),a=V();O(!1);const i=O(!1);O(""),O(0);const o=x(()=>l.defaultAvatar),s=x(()=>t.sidebar),p=x(()=>a.avatar),c=x(()=>a.name),h=x(()=>a.nickname),m=x(()=>l.nav),g=x(()=>l),v=x(()=>a),T=x(()=>l.showPageJsonSchema||!1),{isDark:S,toggleTheme:w}=Tt(),_=x(()=>{const R=g.value.envColor?.[v.value.env];return S.value?{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.55) 0%, rgba(37, 99, 235, 0.45) 45%, rgba(15, 23, 42, 0.92) 100%)",borderBottom:"1px solid rgba(148, 163, 184, 0.35)",boxShadow:"0 1px 8px rgba(15, 23, 42, 0.7)"}:R?{background:`linear-gradient(135deg, rgba(255, 255, 255, 0.18) 0%, rgba(255, 255, 255, 0.05) 60%, ${R} 100%)`,borderBottom:"1px solid rgba(15, 23, 42, 0.08)",boxShadow:"0 1px 4px rgba(15, 23, 42, 0.08)"}:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 250, 252, 0.9) 70%, #ffffff 100%)",borderBottom:"1px solid rgba(15, 23, 42, 0.08)",boxShadow:"0 1px 4px rgba(15, 23, 42, 0.05)"}});xe(()=>{dt("el-submenu is-active");const R=B("navBarNotice")||"";R.length>0&&!B("closeNavNotice")&&z(R)&&window?.App?.config?.globalProperties?.$notify({title:"æç¤º",message:R,dangerouslyUseHTMLString:!0,duration:0,onClose:U}),g.value.envColor?.[v.value.env]&&zt({elRef:E.value.$el,waterMark:v.value.env,color:"skyblue",size:"20"})});const E=O();function G(){t.toggleSideBar()}async function L(){await a.logout();const R=window?.App?.config?.globalProperties?.$router?.currentRoute?.value;location.reload(`${location.origin}/#/login?redirect=${R?.fullPath||"/"}`)}function B(R){return l[R]}async function U(){l.updateSettings({closeNavNotice:!0}),Vt(B("navBarNotice"))}function z(R){const M="dismiss:navbar_notice";return fe.exist(M)?fe.get(M)!==R:!0}function Vt(R){fe.set("dismiss:navbar_notice",R)}return(R,M)=>{const Ye=me,qt=ol,Ut=il,et=rl,Ft=sl,Gt=nl,Ht=yt,Kt=ne;return n(),f(Kt,{ref_key:"header",ref:E,class:"navbar",style:Kl(_.value)},{default:r(()=>[u(Ye,{span:16},{default:r(()=>[u(xa,{"is-active":s.value.opened,class:"hamburger-container",onToggleClick:G},null,8,["is-active"]),u(ka,{class:"breadcrumb-container"})]),_:1}),u(Ye,{span:8},{default:r(()=>[k("div",mi,[T.value?(n(),y("div",hi,[u(ci)])):C("",!0),k("div",fi,[u(d(Fe),{buttons:m.value},null,8,["buttons"])]),u(Ut,{placement:"bottom",content:d(S)?"åˆ‡æ¢ä¸ºæ˜äº®æ¨¡å¼":"åˆ‡æ¢ä¸ºæš—é»‘æ¨¡å¼"},{default:r(()=>[k("div",{class:"right-item theme-toggle",role:"button",tabindex:"0",onClick:M[0]||(M[0]=(...ie)=>d(w)&&d(w)(...ie)),onKeydown:[M[1]||(M[1]=lt(at((...ie)=>d(w)&&d(w)(...ie),["prevent"]),["enter"])),M[2]||(M[2]=lt(at((...ie)=>d(w)&&d(w)(...ie),["prevent"]),["space"]))]},[u(qt,null,{default:r(()=>[(n(),f(Ke(d(S)?d(Cl):d(Pl))))]),_:1})],32)]),_:1},8,["content"]),u(Gt,{class:"right-item",trigger:"click"},{dropdown:r(()=>[u(Ft,{class:"user-dropdown"},{default:r(()=>[u(et,{icon:"oms-icon-index",onClick:M[3]||(M[3]=ie=>R.$router.push("/"))},{default:r(()=>[...M[5]||(M[5]=[I("é¦–é¡µ",-1)])]),_:1}),u(et,{divided:"",icon:"el-icon-switch-button",onClick:L},{default:r(()=>[...M[6]||(M[6]=[I("é€€å‡ºç™»å½•",-1)])]),_:1})]),_:1})]),default:r(()=>[k("div",bi,[k("img",{src:p.value?p.value:o.value,class:"user-avatar",alt:"å¤´åƒ"},null,8,yi),M[4]||(M[4]=I()),k("span",vi,j(h.value||c.value),1)])]),_:1})])]),_:1}),i.value?(n(),f(Ht,{key:0,"with-header":!1,size:"50%"})):C("",!0)]),_:1},8,["style"])}}}),ki=D(gi,[["__scopeId","data-v-c4905268"]]),_i=["src"],wi={key:1,class:"sidebar-title"},xi=["src"],Si={class:"sidebar-title"},Ei=K({__name:"Logo",props:{collapse:{type:Boolean}},setup(e){const t=q(),l=x(()=>t.title),a=x(()=>t.logo);return(i,o)=>{const s=A("router-link");return n(),y("div",{class:Q(["sidebar-logo-container",{collapse:i.collapse}])},[u(Fl,{name:"sidebarLogoFade"},{default:r(()=>[i.collapse?(n(),f(s,{key:"collapse",class:"sidebar-logo-link",to:"/"},{default:r(()=>[a.value?(n(),y("img",{key:0,src:a.value,class:"sidebar-logo"},null,8,_i)):(n(),y("h1",wi,j(l.value),1)),o[0]||(o[0]=k("div",null,"ç³»ç»Ÿ",-1))]),_:1})):(n(),f(s,{key:"expand",class:"sidebar-logo-link",to:"/"},{default:r(()=>[a.value?(n(),y("img",{key:0,src:a.value,class:"sidebar-logo"},null,8,xi)):C("",!0),k("h1",Si,j(l.value),1)]),_:1}))]),_:1})],2)}}}),Ti=D(Ei,[["__scopeId","data-v-7c0ca32e"]]),Ii={props:{to:{type:String,required:!0},newTab:{type:Boolean,required:!1}},methods:{compType(e){return tt(e)||this.newTab?"a":"router-link"},linkProps(e){return tt(e)?{is:"a",href:e,target:"_blank",rel:"noopener"}:this.newTab?{is:"a",href:this.$router.resolve(e).href,target:"_blank",rel:"noopener"}:{is:"router-link",to:e}}}};function Bi(e,t,l,a,i,o){return n(),f(Ke(o.compType(l.to)),Y(se(o.linkProps(l.to))),{default:r(()=>[de(e.$slots,"default")]),_:3},16)}const Oi=D(Ii,[["render",Bi]]),Ci={computed:{device(){return this.$pinia?.state?.value?.app?.device||"desktop"}},mounted(){this.fixBugIniOS()},methods:{fixBugIniOS(){const e=this.$refs.subMenu;if(e){const t=e.handleMouseleave;e.handleMouseleave=l=>{this.device!=="mobile"&&t(l)}}}}},Pi={class:"menu-content"},Di=K({__name:"MenuContent",props:{meta:{type:Object,default:()=>({icon:"",title:""})}},setup(e){return(t,l)=>{const a=A("VIcon");return n(),y(P,null,[u(a,{name:e.meta.icon||"ra-all"},null,8,["name"]),k("span",Pi,j(e.meta.title),1)],64)}}}),Ai={name:"SidebarItem",components:{AppLink:Oi,MenuContent:Di},mixins:[Ci],props:{item:{type:Object,required:!0},isNest:{type:Boolean,default:!1},to:{type:String,default:""}},methods:{itemClick(){fe.remove("table_filter:"+this.$props.to)},getTo(e){try{return this.$router.resolve(e.redirect?e.redirect:e).fullPath}catch{return console.error("è·¯ç”±è§£æé”™è¯¯"),"/"}}}},Li={key:0,class:"menu-wrapper"};function $i(e,t,l,a,i,o){const s=A("menu-content"),p=dl,c=A("app-link"),h=A("sidebar-item",!0),m=cl;return l.item.hidden!==!1?(n(),y("div",Li,[l.item.meta&&l.item.meta.menuType===2?(n(),y(P,{key:0},[l.item.meta?(n(),f(c,{key:0,to:l.to,"new-tab":l.item.meta.newTab},{default:r(()=>[u(p,{index:l.to,class:Q({"submenu-title-noDropdown":!l.isNest}),onClick:o.itemClick},{default:r(()=>[u(s,{meta:l.item.meta},null,8,["meta"])]),_:1},8,["index","class","onClick"])]),_:1},8,["to","new-tab"])):C("",!0)],64)):l.item.meta&&l.item.meta.menuType===1?(n(),f(m,{key:1,ref:"subMenu",index:l.to,class:Q({"submenu-title-noDropdown":!l.isNest})},{title:r(()=>[l.item.redirect&&l.item.redirect!=="#"?(n(),f(c,{key:0,to:l.to},{default:r(()=>[u(s,{meta:l.item.meta},null,8,["meta"])]),_:1},8,["to"])):(n(),f(s,{key:1,meta:l.item.meta},null,8,["meta"]))]),default:r(()=>[(n(!0),y(P,null,N(l.item.children,g=>(n(),f(h,{key:g.path,"is-nest":!0,item:g,to:o.getTo(g),class:"nest-menu"},null,8,["item","to"]))),128))]),_:1},8,["index","class"])):C("",!0)])):C("",!0)}const Mi=D(Ai,[["render",$i]]),ji=K({__name:"SearchMenu",setup(e){const t=V();function l(h){return h.filter(m=>m.meta?.menuType===0?!1:(m.children&&(m.children=l(m.children),m.children.length===0&&delete m.children),!0))}const a=O(""),i=x(()=>t.remoteRouter),o=we(),s=x(()=>{let h=[];return i.value.forEach(m=>{h=h.concat(b.cloneDeep(m.routes))}),l(h)});function p(h){let m=h;if(h.meta.menuType===1&&h.children&&h.children.length>0){for(let g=0;g<h.children.length;g++)if(h.children[g].path.indexOf("/:")===-1){m=h.children[g];break}}return o.resolve(m.redirect?m.redirect:m).fullPath}function c(h){o.push(h),a.value=""}return(h,m)=>{const g=Ne,v=ul,T=Ve;return n(),f(T,{modelValue:d(a),"onUpdate:modelValue":m[0]||(m[0]=S=>He(a)?a.value=S:null),filterable:"",placeholder:"æœç´¢èœå•...",class:"search-menu",onChange:c},{default:r(()=>[(n(!0),y(P,null,N(d(s),S=>(n(),y(P,{key:S.path},[S.children!==void 0?(n(),y(P,{key:0},[S.meta.menuType!==0?(n(),f(v,{key:S.path+"-",label:S.meta.title},{default:r(()=>[(n(!0),y(P,null,N(S.children,(w,_)=>(n(),y(P,{key:w.path},[S.meta.menuType!==0?(n(),f(g,{key:0,label:(_===S.children.length-1?"â””â”€":"â”œâ”€")+w.meta.title,value:p(w)},null,8,["label","value"])):C("",!0)],64))),128))]),_:2},1032,["label"])):C("",!0)],64)):(n(),f(g,{key:1,label:""+S.meta.title,value:p(S)},null,8,["label","value"]))],64))),128))]),_:1},8,["modelValue"])}}}),Ri=D(ji,[["__scopeId","data-v-1821c9c2"]]);var J=(e=>(e[e.custom=0]="custom",e[e.list=1]="list",e[e.form=2]="form",e[e.customSchema=3]="customSchema",e[e.localComp=4]="localComp",e[e.tree=5]="tree",e[e.report=6]="report",e[e.entity=7]="entity",e))(J||{}),H=(e=>(e[e.hidden=0]="hidden",e[e.dir=1]="dir",e[e.menu=2]="menu",e[e.page=3]="page",e))(H||{});const Ni=K({__name:"index",setup(e){const t=ee(),l=V(),a=q(),i=x(()=>t.sidebar),o=x(()=>l.remoteRouter),s=x(()=>l.customRouter),p=we(),c=Z(),h=x(()=>{let _=[];return p.options.routes.concat(s.value||[]).forEach(E=>{E.path==="/"?_=_.concat(E.children||[]):_.push(E)}),b.cloneDeep([{label:"",routes:_},...o.value])}),m=x(()=>{const _=c.matched;for(let E=_.length-1;E>=0;E--){const G=_[E];if(G.meta.menuType===H.menu)return S(),p.resolve(G.redirect?G.redirect:G).fullPath}return""}),g=x(()=>a.sidebarLogo),v=x(()=>({menuBg:"#304156",menuText:"#bfcbd9",menuActiveText:"#409EFF"})),T=x(()=>!i.value.opened);xe(()=>S());function S(){dt("is-active",200)}function w(_){return _.filter(E=>[H.dir,H.menu].indexOf(E.meta.menuType)!==-1).map(E=>(E=Object.assign({},E),E.children&&(E.children=w(E.children)),E))}return(_,E)=>{const G=ll,L=al;return n(),y("div",{class:Q({"has-logo":d(g)})},[d(g)?(n(),f(Ti,{key:0,collapse:d(T)},null,8,["collapse"])):C("",!0),u(L,{"wrap-class":"scrollbar-wrapper"},{default:r(()=>[d(T)?C("",!0):(n(),f(Ri,{key:0})),u(G,{"default-active":d(m),collapse:d(T),"background-color":d(v).menuBg,"text-color":d(v).menuText,"unique-opened":!1,"active-text-color":d(v).menuActiveText,"collapse-transition":!1,mode:"vertical"},{default:r(()=>[(n(!0),y(P,null,N(d(h),(B,U)=>(n(),y(P,{key:U+"-module"},[(n(!0),y(P,null,N(w(B.routes),z=>(n(),f(Mi,{key:z.path,item:z,to:_.$router.resolve(z.redirect?z.redirect:z).fullPath},null,8,["item","to"]))),128))],64))),128))]),_:1},8,["default-active","collapse","background-color","text-color","active-text-color"])]),_:1})],2)}}}),Vi=D(Ni,[["__scopeId","data-v-5b1cbaf5"]]),qi={class:"app-main"},Ui={__name:"AppMain",setup(e){const t=Z(),l=[],a=O(0);return xl(()=>{t.meta?.keepAlive&&l.indexOf(t.name)&&l.push(t.name),a.value++}),(i,o)=>{const s=A("router-view"),p=pl;return n(),y("section",qi,[(n(),f(s,{key:i.$route.fullPath+d(a)})),u(p,{bottom:50})])}}},Fi=D(Ui,[["__scopeId","data-v-ca0f0d98"]]),Gi={class:"main-container"},Hi=992,Ki={__name:"index",setup(e){const{body:t}=document,l=ee(),a=q(),i=x(()=>l.sidebar),o=x(()=>l.device),s=x(()=>a.fixedHeader),p=x(()=>({hideSidebar:!i.value.opened,openSidebar:i.value.opened,withoutAnimation:i.value.withoutAnimation,mobile:o.value==="mobile"})),c=()=>t.getBoundingClientRect().width-1<Hi;Dl(window,"resize",()=>m());const h=()=>l.closeSideBar({withoutAnimation:!1}),m=()=>{if(!document.hidden){const g=c();l.toggleDevice(g?"mobile":"desktop"),g&&l.closeSideBar({withoutAnimation:!0})}};return(g,v)=>(n(),y("div",{class:Q([d(p),"app-wrapper"])},[d(o)==="mobile"&&d(i).opened?(n(),y("div",{key:0,class:"drawer-bg",onClick:h})):C("",!0),u(d(Vi),{class:"sidebar-container"}),k("div",Gi,[k("div",{class:Q({"fixed-header":d(s)})},[u(d(ki))],2),u(d(Fi))])],2))}},Dt=D(Ki,[["__scopeId","data-v-b7ab74f0"]]),zi={id:"login"},Ji={id:"form"},Wi={key:0,class:"captcha"},Xi=["src"],Qi={class:"tips"},Zi={class:"sso"},Yi=K({__name:"login",setup(e){const t=we(),l=Z(),a=q(),i=ee(),o=V(),s=x(()=>a.loginTips),p=x(()=>a.captcha),c=x(()=>i.baseURL),h=O(0),m=()=>h.value++,g=x(()=>v.value.username.length>0&&v.value.password.length>=4&&(p.value?v.value.captcha.length===4:!0)),v=O({username:"",password:"",captcha:"",sing:""}),T=()=>{if(v.value.username===""||v.value.password===""||p.value&&v.value.captcha===""){bt.error("ç”¨æˆ·å, å¯†ç , éªŒè¯ç æ˜¯å¿…é¡»çš„");return}p.value&&(v.value.sing=Ll.MD5(`${v.value.username}${v.value.password}${v.value.captcha}`).toString()),o.login(v.value).then(S=>{t.push({path:l.query?.redirect||"/"})}).catch(S=>{h.value++})};return(S,w)=>(n(),y("div",zi,[w[4]||(w[4]=k("h1",{id:"title"},"ç™»å½•",-1)),k("form",Ji,[ye(k("input",{"onUpdate:modelValue":w[0]||(w[0]=_=>d(v).username=_),type:"text",placeholder:"ç”¨æˆ·å",class:"input"},null,512),[[Ee,d(v).username]]),ye(k("input",{"onUpdate:modelValue":w[1]||(w[1]=_=>d(v).password=_),type:"password",placeholder:"å¯†ç ",class:"input"},null,512),[[Ee,d(v).password]]),p.value?(n(),y("div",Wi,[ye(k("input",{"onUpdate:modelValue":w[2]||(w[2]=_=>d(v).captcha=_),type:"text",placeholder:"éªŒè¯ç ",class:"input-captcha"},null,512),[[Ee,d(v).captcha]]),k("img",{class:"captcha-img",src:c.value+"/user/captcha?ts="+d(h),title:"ç‚¹å‡»åˆ·æ–°",onClick:m},null,8,Xi)])):C("",!0),k("div",{class:Q({input:!0,button:!0,"no-ready":!g.value}),onClick:T},"ç™»å½•",2),k("div",Qi,[k("div",null,j(s.value),1)]),k("div",Zi,[w[3]||(w[3]=k("div",{id:"sso-qrcode"},null,-1)),(n(!0),y(P,null,N(Object.keys([]),_=>(n(),y("div",{key:_},j(_),1))),128))])])]))}}),eo={name:"NotFoundPage"},to={class:"not-found"};function lo(e,t,l,a,i,o){return n(),y("div",to,[...t[0]||(t[0]=[k("svg",{width:"380px",height:"500px",viewBox:"0 0 837 1045",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"},[k("g",{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"},[k("path",{id:"Polygon-1",d:"M353,9 L626.664028,170 L626.664028,487 L353,642 L79.3359724,487 L79.3359724,170 L353,9 Z",stroke:"#007FB2","stroke-width":"6","sketch:type":"MSShapeGroup"}),k("path",{id:"Polygon-2",d:"M78.5,529 L147,569.186414 L147,648.311216 L78.5,687 L10,648.311216 L10,569.186414 L78.5,529 Z",stroke:"#EF4A5B","stroke-width":"6","sketch:type":"MSShapeGroup"}),k("path",{id:"Polygon-3",d:"M773,186 L827,217.538705 L827,279.636651 L773,310 L719,279.636651 L719,217.538705 L773,186 Z",stroke:"#795D9C","stroke-width":"6","sketch:type":"MSShapeGroup"}),k("path",{id:"Polygon-4",d:"M639,529 L773,607.846761 L773,763.091627 L639,839 L505,763.091627 L505,607.846761 L639,529 Z",stroke:"#F2773F","stroke-width":"6","sketch:type":"MSShapeGroup"}),k("path",{id:"Polygon-5",d:"M281,801 L383,861.025276 L383,979.21169 L281,1037 L179,979.21169 L179,861.025276 L281,801 Z",stroke:"#36B455","stroke-width":"6","sketch:type":"MSShapeGroup"})])],-1),k("div",{class:"message-box"},[k("h1",null,"404"),k("p",null,"Page not found"),k("div",{class:"buttons-con"},[k("div",{class:"action-link-wrap"},[k("a",{href:"",class:"link-button"},"Go to Home Page")])])],-1)])])}const ao=D(eo,[["render",lo],["__scopeId","data-v-26068803"]]),io=[{path:"/",component:Dt,redirect:"/dashboard",name:"Root",meta:{menuType:1},children:[{path:"dashboard",name:"Dashboard",component:fa,meta:{title:"Dashboard",icon:"el-icon-help",menuType:2,keepAlive:!0}}]},{path:"/login",component:Yi,meta:{title:"ç”¨æˆ·ç™»å½•",menuType:0},hidden:!0},{path:"/404",component:ao,meta:{menuType:0},hidden:!0}],le=_l({history:wl(),routes:io});De.configure({showSpinner:!1});function oo(e){e.beforeEach((t,l,a)=>{De.start(),t.preHash=location.hash.replace("#",""),a()}),e.afterEach(t=>{const l=V($);t.matched.length>0&&l.updateState({key:"path",value:t.matched[t.matched.length-1].path.replace("(\\d+)","")}),De.done()})}function no(){return V($).isLodeRemoteRoutes}function At(){return q($).whiteRoutes||[]}function so(){return V($).token}const ro={};function po(){return b.merge(q($).sso||{},ro)}function uo(){const e=po(),t=q($).activeSsoKey||"",l=e[t];if(l!==void 0)return l()}function co(e){e.beforeEach(async(t,l,a)=>{if(At().indexOf(t.path)!==-1){a();return}if(so()){t.query?.redirect?a(t.query?.redirect):a();return}const i=t.query.redirect||t.path,o=uo();if(!o){a(`/login?redirect=${i}`);return}const s=o.flag(),p=V($);if(s&&await p.login(b.isObject(s)?s:{ticket:s})){a();return}o.jumpToLoginPage(a,`/login?redirect=${i}`)})}const mo={},ho={class:"loading preloader"};function fo(e,t){return n(),y("div",ho,[...t[0]||(t[0]=[k("div",{class:"preloader-inner"},null,-1)])])}const bo=D(mo,[["render",fo]]),yo={name:"VNotice",props:{dataApi:{type:String,default:""},notice:{type:Object,default:()=>{}}},data(){return{noticeProps:{},hasNotice:!1}},mounted(){if(this.$props.dataApi,this.$props.dataApi){this.$http.get(this.$props.dataApi).then(({data:e})=>{this.noticeProps=e,this.hasNotice=!!e});return}else this.hasNotice=Object.keys(this.$props.notice).length>0,this.noticeProps=this.$props.notice}};function vo(e,t,l,a,i,o){const s=qe;return n(),y("div",null,[i.hasNotice?(n(),f(s,Y(X({key:0},i.noticeProps)),null,16)):C("",!0)])}const go=D(yo,[["render",vo]]),ko=["innerHTML"],_o=K({__name:"PageLoad",props:{schemaHandler:{type:Function,default:e=>e},schemaApi:{default:""}},setup(e){const t=e,l=ee(),a=q(),i=V(),o=Z(),s=O(!0),p=O(!1),c=O({}),h=O(""),m=O({}),g=O([]),v=O(!1),T=x(()=>i.env),S=x(()=>a);return ze(()=>{const w=o.path.split("/").filter(L=>L),_=w.length>1?w.slice(0,w.length-1).join("/"):w[0],E="/schema"+o.meta.path,G={params:o.params};(window?.App?.config?.globalProperties?.$http).get(t.schemaApi||E,G).then(({data:L})=>{s.value=!1,oe(L)&&(L.notice!==void 0&&(p.value=!0,je(L.notice)?c.value={title:L.notice}:oe(L.notice)&&(c.value=L.notice,h.value=L.notice.noticeApi),delete L.notice),g.value=L.ownerNames||[],v.value=L.serviceOffLine||!1),m.value=t.schemaHandler(L,_),l.SET_PAGE_JSON_SCHEMA({page:o.path,json:m.value})})}),(w,_)=>{const E=qe;return n(),y(P,null,[d(g).length>0?(n(),f(E,{key:0,title:`è¯¥é¡µé¢åŠŸèƒ½å¯¹åº”å¼€å‘: [ ${d(g).join(", ")} ] æœ‰é—®é¢˜å¯ç›´æ¥ä¼å¾®åé¦ˆ`,type:"info",style:{margin:"0 0 20px 0"},closable:!1},null,8,["title"])):C("",!0),d(T)==="prod"&&d(v)?(n(),y("div",{key:1,class:"offline-notice",innerHTML:d(v)===!0?d(S).serviceOffLineNotice:d(v)},null,8,ko)):(n(),y(P,{key:2},[d(p)?(n(),f(go,{key:0,notice:d(c),style:{margin:"0 0 20px 0"},"data-api":d(h)},null,8,["notice","data-api"])):C("",!0),d(s)?(n(),f(bo,{key:1})):de(w.$slots,"default",Y(X({key:2},d(m))),void 0,!0)],64))],64)}}}),he=D(_o,[["__scopeId","data-v-e330fdc7"]]),Lt={__name:"table",setup(e){const t=(l,a)=>{if(l.orderBy){const o={prop:l.orderBy.field,order:l.orderBy.mod==="desc"?"descending":"ascending"};l.tableProps=b.merge(l.tableProps,{defaultSort:o})}const i=Object.keys(ce.props);return Object.keys(l).forEach(o=>{i.indexOf(o)===-1&&delete l[o]}),l.listApi===void 0&&(l.listApi=`/${a}/list`),l};return(l,a)=>(n(),f(he,{"schema-handler":t},{default:r(i=>[u(d(ce),Y(se(i)),null,16)]),_:1}))}},$e={__name:"form",setup(e){const t=Z(),l=we(),a=(p,c)=>{const h=Object.keys(te.props);return Object.keys(p).forEach(m=>{if(h.indexOf(m)===-1){delete p[m];return}/.*Api$/.test(m)&&(p[m]=be(p[m],t.params))}),p.saveApi===void 0&&(t.params.id!==void 0?(p.saveApi=`/${c}/update/${t.params.id}`,p.getApi||(p.getApi=`/${c}/get/${t.params.id}`)):(delete p.getApi,p.saveApi=`/${c}/create`)),p=b.merge({saveApi:c+"/save",afterSubmit:"goback",afterReset:"goback",mod:t.params.id?"edit":"create"},p),p},i=O(0),o=()=>{Nt.request({url:"/form_mutex",method:"get",params:{path:t.fullPath}}).then(p=>{p.data&&(clearInterval(i.value),ft.alert(`${p.data}`,"æ“ä½œæé†’",{showClose:!1,showCancelButton:!0,confirmButtonText:"è¿”å›",cancelButtonText:"åˆ·æ–°",callback:c=>{c==="cancel"?location.reload():s()}}))})};xe(()=>{const p=q();t.params.id!==void 0&&p.formMutex&&(o(),i.value=setInterval(o,2e3))}),Nl(()=>{clearInterval(i.value)});function s(){t.query?.goback?l.push(t.query?.goback):history.state.back&&history.back()}return(p,c)=>(n(),f(he,{"schema-handler":a},{default:r(h=>[u(d(te),Y(se(h)),null,16)]),_:1}))}},wo=K({name:"VTree",components:{VForm:te},props:{treeApi:{type:String,default:"",require:!0},getApi:{type:String,default:"",require:!0},saveApi:{type:String,default:"",require:!0},createApi:{type:String,default:"",require:!0},deleteApi:{type:String,default:"",require:!0},formItems:{type:Array,default:()=>[]},treeProps:{type:Object,default:()=>{}},maxDepth:{type:Number,default:3},props:{type:Object,default:()=>{}}},data(){return{type:0,treeData:[],formData:{},localTreeProps:b.merge({"default-expand-all":!0,"expand-on-click-node":!1,props:{children:"children",label:"label"}},this.$props.treeProps),formkey:0,tablekey:0,menuOptions:{}}},computed:{formType(){return["","æ–°å»º","ç¼–è¾‘"][this.type]},formProps(){let e=be(this.$props.saveApi,this.formData);return this.type===1&&(e=this.$props.createApi),{saveApi:e,getApi:this.$props.getApi,formItems:this.$props.formItems}}},created(){this.loadTree()},methods:{loadTree(){this.$http.request({method:"GET",url:this.$props.treeApi}).then(({data:e})=>{this.treeData=e})},onclick(e){this.type=2,this.formData=e,this.formkey++},append(e,t){this.type=1;const l={pid:e.id,[this.$props.props?.levelKey??"level"]:t.level+1,...el(this.$props.props?.effectData,e)};e.children||(e.children=[]),this.formData=l,this.formkey++,e.children.push(l),this.treeData=[...this.treeData]},canAppend(e,t){return e[this.localTreeProps.props.label]?t.level<this.$props.maxDepth:!1},appendNew(){this.type=1;const e={pid:0,[this.$props.props?.levelKey??"level"]:1};this.formData=e,this.formkey++,this.tablekey++,this.treeData=[...this.treeData,e]},remove(e){this.$http.request({method:"DELETE",url:be(this.$props.deleteApi,e)}).then(({code:t})=>{t!==0?this.$message.error("æ“ä½œå¤±è´¥"):this.loadTree()})},submit(){setTimeout(()=>{this.loadTree(),this.formData={},this.tablekey++,this.type=0},200)},allowDrap(e){return!0},allowDrop(e,t,l){return l==="inner"},handleDragEnd(e,t,l,a){const i=e.data;i.pid=t.data.id,this.$http.request({method:"POST",url:be(this.$props.saveApi,i),data:i}).then(({code:o})=>{o!==0&&this.$message.error("æ“ä½œå¤±è´¥")})}}}),xo={class:"card-header"},So={class:"tree-action"},Eo={key:0},To={key:1,style:{color:"#E6A23C"}},Io={class:"card-header"};function Bo(e,t,l,a,i,o){const s=ke,p=gl,c=_e,h=me,m=A("v-form"),g=ne;return n(),f(g,{class:"tree-box",gutter:20},{default:r(()=>[u(h,{span:8,class:"tree-tree"},{default:r(()=>[u(c,{shadow:"never"},{header:r(()=>[k("div",xo,[t[3]||(t[3]=k("span",null,"åˆ—è¡¨",-1)),u(s,{type:"text",onClick:t[0]||(t[0]=()=>e.appendNew())},{default:r(()=>[...t[2]||(t[2]=[I("æ·»åŠ ",-1)])]),_:1})])]),default:r(()=>[(e.treeData||[]).length>0?(n(),f(p,X({key:0,style:{height:"100vh"},data:e.treeData,"node-key":"id"},e.localTreeProps,{draggable:"","allow-drag":e.allowDrap,"allow-drop":e.allowDrop,onNodeDragEnd:e.handleDragEnd}),{default:r(({node:v,data:T})=>[k("span",So,[T[e.localTreeProps.props.label]?(n(),y("span",Eo,j(T[e.localTreeProps.props.label]),1)):(n(),y("span",To,"è¯·åœ¨å³ä¾§è¡¨å•ä¸­ä¿®æ”¹ --> ")),k("span",null,[T[e.localTreeProps.props.label]?(n(),f(s,{key:0,class:"button",type:"text",onClick:()=>e.onclick(T)},{default:r(()=>[...t[4]||(t[4]=[I("ç¼–è¾‘",-1)])]),_:1},8,["onClick"])):C("",!0),e.canAppend(T,v)?(n(),f(s,{key:1,class:"button",type:"text",onClick:()=>e.append(T,v)},{default:r(()=>[...t[5]||(t[5]=[I("æ·»åŠ ",-1)])]),_:1},8,["onClick"])):C("",!0),T.children===void 0||T.children.length===0?(n(),f(s,{key:2,class:"button",type:"text",onClick:()=>e.remove(T)},{default:r(()=>[...t[6]||(t[6]=[I("åˆ é™¤",-1)])]),_:1},8,["onClick"])):C("",!0)])])]),_:1},16,["data","allow-drag","allow-drop","onNodeDragEnd"])):C("",!0)]),_:1})]),_:1}),u(h,{span:16,class:"tree-form"},{default:r(()=>[e.type?(n(),f(c,{key:0,shadow:"never"},{header:r(()=>[k("div",Io,[k("span",null,j(e.formType),1)])]),default:r(()=>[(n(),f(m,X({key:e.formkey,modelValue:e.formData,"onUpdate:modelValue":t[1]||(t[1]=v=>e.formData=v)},e.formProps,{onSubmit:e.submit}),null,16,["modelValue","onSubmit"]))]),_:1})):C("",!0)]),_:1})]),_:1})}const rt=D(wo,[["render",Bo]]),Oo={__name:"tree",setup(e){const t=(l,a)=>{const i=Object.keys(rt.props);return Object.keys(l).forEach(o=>{i.indexOf(o)===-1&&delete l[o]}),l};return(l,a)=>(n(),f(he,{"schema-handler":t},{default:r(i=>[u(rt,Y(se(i)),null,16)]),_:1}))}},Ce={__name:"container",setup(e){const t=O(0);return Sl(()=>{t.value++}),(l,a)=>{const i=A("router-view");return n(),f(i)}}},Co={title:{text:""},tooltip:{trigger:"axis"},grid:{left:"2%",right:"2%",bottom:"5%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},legend:{data:[]},xAxis:{type:"category"},yAxis:{type:"value"},series:[]};function Po(e,t,l){if(l.length===0)return{};let a=b.merge({},Co);if(a.title.text=e,je(t)){const i=[],o=Object.keys(l[0]);let s=o[0],p=o.filter((h,m)=>m>0),c=t;if(t.indexOf(":")>-1){const h=t.split(":"),m=h[1].split(",");c=h[0],s=m[0],p=m.filter((g,v)=>v>0)}p.forEach(h=>{const m=[];l.forEach(g=>{m.push(g[h])}),a.series.push({name:h,type:c,smooth:!0,data:m}),a.legend.data.push(h)}),l.forEach(h=>{i.push(h[s])}),a.xAxis.data=i}return oe(t)&&(a=b.merge(a,t)),a}const Do=K({name:"NumberPanel",props:{dataList:{type:Array,default:e=>[]}},data(){return{}}}),Ao={class:"number-panel-title"},Lo={class:"number"},$o={class:"name"};function Mo(e,t,l,a,i,o){return n(!0),y(P,null,N(e.dataList,(s,p)=>(n(),y("span",{key:p},[k("div",Ao,[(n(!0),y(P,null,N(Object.keys(s),(c,h)=>(n(),y("div",{key:h,class:"title-inner"},[k("p",Lo,j(s[c]),1),k("p",$o,j(c),1)]))),128))])]))),128)}const jo=D(Do,[["render",Mo],["__scopeId","data-v-cc0d8293"]]),Ro={components:{Chart:Bl,Md:Al,Json:Ge,Table:ce,Number:jo,Html:""},props:{option:{type:Object,default:()=>{}}},setup(e){const t=()=>e.option.chart==="num"?"number":e.option.type;return{compprops:l=>{const a=t();if(a==="number")return{dataList:l.data};if(a==="chart")return{options:Po(l.id,l.chart,l.data)};if(a==="md")return{source:l.data};if(a==="table"){if(!mt(l.data))return{showPagination:!1};const i=[];return l.data[0]&&Object.keys(l.data[0]).forEach((o,s)=>{i.push({field:o,label:o})}),{headers:i,list:l.data,showPagination:!1}}return{}},comptype:t}}};function No(e,t,l,a,i,o){const s=_e,p=Ul("resize");return ye((n(),f(s,{shadow:"never",class:"part"},{default:r(()=>[(n(),f(Ke(a.comptype()),Y(se(a.compprops(l.option))),null,16))]),_:1})),[[p,!0]])}const Vo=D(Ro,[["render",No],["__scopeId","data-v-a5a65cc1"]]),qo=K({__name:"index",props:{filter:{type:Array,default:()=>[]},dataPart:{type:Array,default:()=>[]}},setup(e){const t=Z();xe(()=>{});const l=e,a=O({});ze(()=>{l.filter?.forEach(m=>{m.default!==null&&(a.value[m.field]=m.default)})});const i={inline:!0,labelPosition:"right",labelWidth:"auto",submitButton:{text:"æŸ¥è¯¢"},cancelButton:{text:"é‡ç½®"}},o=O(1),s=O(l.filter),p=O(l.dataPart),c=x(()=>{let m=t.params.id;if(!m){const g=t.path.split("/");m=g[g.length-1]}return"/focusbi_report/view/"+m}),h=m=>{Nt.get(c.value,{params:m}).then(({data:g})=>{s.value=g.filter,p.value=g.dataPart,o.value++})};return(m,g)=>{const v=_e,T=me,S=qe,w=ne;return n(),f(w,null,{default:r(()=>[d(s).length>0?(n(),f(T,{key:0,span:24},{default:r(()=>[u(v,{shadow:"never",class:"part-filter"},{default:r(()=>[u(d(te),{modelValue:d(a),"onUpdate:modelValue":g[0]||(g[0]=_=>He(a)?a.value=_:null),"form-items":d(s),options:i,onSubmit:h},null,8,["modelValue","form-items"])]),_:1})]),_:1})):C("",!0),u(T,{span:24},{default:r(()=>[u(w,{gutter:20},{default:r(()=>[(n(!0),y(P,null,N(d(p),(_,E)=>(n(),f(T,{key:E,span:_.col||24},{default:r(()=>[_.errMsg?(n(),f(S,{key:1,title:_.id+" ç‰‡æ®µæ‰§è¡Œå‡ºé”™",type:"error"},{default:r(()=>[I(j(_.errMsg),1)]),_:2},1032,["title"])):(n(),f(Vo,{key:d(o),option:_},null,8,["option"]))]),_:2},1032,["span"]))),128))]),_:1})]),_:1})]),_:1})}}}),Uo={__name:"report",setup(e){const t=Z(),l=x(()=>{let a=t.params.id;if(!a){const i=t.path.split("/");a=i[i.length-1]}return"/focusbi_report/view/"+a});return(a,i)=>(n(),f(he,{"schema-api":d(l)},{default:r(o=>[u(qo,Y(se(o)),null,16)]),_:1},8,["schema-api"]))}},Fo=e=>u("div",null,[e.test]),Go={card:_e,form:te,table:ce,test:Fo,row:ne,col:me},Ho={card:{type:"card",props:{class:"render-card",shadow:"never"}},form:{type:"form",props:{afterReset:""}},table:{type:"table",props:{syncUrl:!1}}};function Ko(e){const t=Object.assign({},e),l=t.type.split(".").reverse(),a=t.span||24;delete t.span;let i={...t,type:l[0]};for(let o=1;o<l.length;o++)i={type:l[o],children:[i]};return i.span=a,Ze([i])}function Ze(e){const t={type:"row",props:{gutter:20,class:"render-row"},children:[]};return e.forEach(l=>{let a=Object.assign({},l);if(oe(a.props?.style)){let s="";Object.keys(a.props?.style).forEach(p=>{s+=p+":"+a.props?.style[p]+";"}),a.props.style=s}const i={span:a.span??24,class:"render-col"};if(delete a.span,a.type.indexOf(".")>0){t.children.push({type:"col",props:i,children:Ko(a)});return}a=b.merge({props:{}},Ho[a.type]||{},a);const o=$t(a.children);o.length&&(a.children=Ze(o)),t.children.push({type:"col",props:i,children:[a]})}),[t]}function $t(e){return mt(e)?e:oe(e)?[e]:[]}let Me={};const Mt=e=>{const t=Go[e.type]||Me[e.type]||e.type;return ql(t,e.props,{default:()=>$t(e.children).map(l=>Mt(l))})},zo=e=>(Object.keys(Me).length===0&&(Me=Vl().appContext.components),Ze(Object.values(e.schema)).map(t=>Mt(t))),Jo={__name:"custom",setup(e){const t=O([]),l=(a,i)=>(t.value=Ml(a),a);return(a,i)=>(n(),f(he,{"schema-handler":l},{default:r(()=>[u(d(zo),{schema:d(t)},null,8,["schema"])]),_:1}))}};let pe={};function Gn(e){pe=e}const Wo=e=>{const t=l=>{const a="./views/"+l+".vue";return pe&&pe[a]&&pe[a].default?pe[a].default:(console.error(`è‡ªå®šä¹‰ç»„ä»¶ä¸å­˜åœ¨ ${e.name} ${e.view}`),Ce)};if(e.path==="#")return Ce;switch(e.page_type){case J.list:return Lt;case J.form:return $e;case J.custom:case J.localComp:return t(e.view||"");case J.tree:return Oo;case J.report:return Uo;case J.customSchema:return Jo}return Ce};function Xo(e){let t=e.path;return e.type===H.menu&&e.page_type===J.entity&&(t="#"),t.indexOf(":id")>-1&&t.indexOf(":id")+3===t.length&&(t=t.replace(":id",":id(\\d+)")),t==="#"?"/"+e.id+"_DIR_"+e.name:t[0]!=="/"?"/"+t:t}function Qo(e){return(e.path+e.name).split("/").filter(t=>t).join("_")}const jt=e=>{const t=e.type!==H.page,l={path:Xo(e),name:e.id+"_"+Qo(e)+"_"+e.path.replaceAll("/","_"),component:Wo(e),meta:{id:e.id,pageId:e.id,title:e.name,icon:e.icon,hidden:!t,path:e.path,menuType:e.type,keepAlive:!1},children:e.children?e.children.map(a=>jt(a)):[]};if(e.page_type===J.entity){const a=e.path+"/list",i=e.path+"/form",o=e.path+"/:id",s=[{path:a,name:e.name+"åˆ—è¡¨"+e.id,component:Lt,meta:{id:e.id+99999,title:"åˆ—è¡¨",hidden:!0,menuType:H.hidden,keepAlive:!1,pageId:e.id,path:e.path}},{path:i,name:e.name+"æ–°å»º"+e.id,component:$e,meta:{id:e.id+99999+1,title:"æ–°å»º",hidden:!0,menuType:H.hidden,keepAlive:!1,pageId:e.id,path:e.path}},{path:o,name:e.name+"ç¼–è¾‘"+e.id,component:$e,meta:{id:e.id+99999+2,title:"ç¼–è¾‘",hidden:!0,menuType:H.hidden,keepAlive:!1,pageId:e.id,path:e.path}}];l.children=[...s,...l.children]}if(l.children&&l.children.length>0){let a=!0;if(l.children.forEach(i=>{i.meta&&!i.meta.hidden&&(a=!1)}),l.meta&&(l.meta.menuType=t?H.dir:H.hidden),a){l.meta&&(l.meta.menuType=H.menu);let i="/";for(let o=0;o<l.children.length;o++)if(l.children[o].path.indexOf("/:")===-1){i=l.children[o].path;break}l.redirect=i,l.path="/"+e.id+"_DIR"+l.redirect.replaceAll("/","_").toUpperCase()}}return l},Zo=e=>{const t=[];return e.forEach(l=>{const a={id:l.id,label:l.label,routes:[]};l.routes.forEach(i=>{a.routes.push(jt(i))}),t.push(a)}),t};function Yo(e){e.beforeEach(async(t,l,a)=>{if(At().indexOf(t.path)!==-1){a();return}if(no()){a();return}const i=V($);await i.info();const o=await i.loadRemoteRoutes(),s=Zo(o);s.forEach(p=>{p.routes.forEach(c=>{e.addRoute({path:"/",component:Dt,children:[c]})})}),e.addRoute({name:"404",path:"/:pathMatch(.*)*",redirect:"/404",hidden:!0}),i.updateRemoteRouter(s),await e.replace(t),a()})}function en(e){e.beforeEach(async(t,l,a)=>{const i=[q($).title||""],o=t.matched.length;for(let s=o;s>o-3;s--){const p=t.matched[s-1];p?.meta?.title&&i.push(p.meta.title+"")}i.length>1&&(document.title=i.reverse().join("-")),a()}),e.afterEach(async(t,l,a)=>{const i=ee($);Object.keys(t.meta).length>0&&await i.setCurrentMeta(t.meta)})}function tn(e){co(e),oo(e),Yo(e),en(e)}tn(le);function ln(){return V($).token}function an(){return V($).expired}function pt(e){pa({message:e,type:"error",duration:5*1e3,grouping:!0})}const on={onFulfilled:function(e){e.headers=e.headers||{};const t=ln();return t&&(e.headers["X-Token"]=t),le.currentRoute.value.meta?.path&&(e.headers["X-Path"]=le.currentRoute.value.meta.path),e}},nn={onFulfilled(e){if(!(e.config?.notHoldApiErr!==void 0&&e.config?.notHoldApiErr===!0)&&e.data.code!==0){const l=e.data.message||`æ¥å£è¯·æ±‚é”™è¯¯ ${e.config.method}::${e.config.url?.split("?")[0]}`;if(e.data.code===401){if(an())return;V($).SetExpired(),nt.alert("ç™»å½•ä¿¡æ¯å·²è¿‡æœŸæˆ–æœªç™»å½•, æ˜¯å¦è·³è½¬ç™»å½•","æ“ä½œæé†’",{showClose:!1,confirmButtonText:"é‡æ–°ç™»å½•",showCancelButton:!0,cancelButtonText:"å–æ¶ˆ",callback:a=>{a==="confirm"&&(_t(),location.href=location.origin+location.pathname+location.hash.replace("#","#/?redirect="),location.reload()),V($).SetExpired()}});return}else pt(l);return Promise.reject(l)}let t=e.data?.data?._message_box;return t!==void 0&&(je(t)&&(t={message:e.data?.data?._message_box}),nt({title:"æç¤º",type:"success",grouping:!0,...t})),e.data},onRejected(e){return Ue.isCancel(e)?Promise.reject(""):(pt(`${e.message} ${e.config.method}::${e.config.url?.split("?")[0]}`),Promise.reject(e))}},sn=[{request:da,response:ca},{request:on,response:nn}];function Rt(e={}){const t=Xe.axios||{},l=b.merge(t,e||{}),a=Ue.create({...l});return sn.forEach(i=>{a.interceptors.request.use(i.request.onFulfilled,i.request.onRejected),a.interceptors.response.use(i.response.onFulfilled,i.response.onRejected)}),a}const Nt=Rt(),rn={beforeMount(e,t){e.clickOutsideEvent=function(l){e===l.target||e.contains(l.target)||t.value(l,e)},document.body.addEventListener("click",e.clickOutsideEvent)},unmounted(e){document.body.removeEventListener("click",e.clickOutsideEvent)}},ae=Ol(),pn={mounted:(e,t)=>{e!==null&&(t.value,e.oncontextmenu=l=>{l.preventDefault(),l.stopPropagation(),l.cancelBubble=!0,t.value&&ae.emit("right-click",{event:l,data:t.value})})}},un={mounted(e){}};function ut(e,t){let l=e[`offset${t}`],a=e.offsetParent;for(;a;)l+=a[`offset${t}`],a=a.offsetParent;return l}const dn={mounted:(e,t)=>{if(e===null||!t.value.dev)return;let l=e;if(t.value.parent)for(let c=0;c<t.value.parent;c++)l.parentElement&&(l=l.parentElement);l.classList.add("devtool-hover");const a=document.createElement("i");a.className="devtool-item-wrapper",l.onmouseover=()=>{a.style.height=l.offsetHeight+30+"px",a.style.width=l.offsetWidth+30+"px",a.style.top=ut(l,"Top")-15+"px",a.style.left=ut(l,"Left")-15+"px"};const i=document.createElement("span");i.className="dev-action-edit",i.title="ç¼–è¾‘";const o=document.createElement("i");o.className="iconfont ra-editor1",i.appendChild(o),i.onclick=c=>{ae.emit("dev-action",{event:c,data:{type:"edit",devId:t.value.devId}})},a.appendChild(i);const s=document.createElement("span");s.className="dev-action-del",s.title="åˆ é™¤";const p=document.createElement("i");p.className="iconfont ra-cut",s.appendChild(p),s.onclick=c=>{ae.emit("dev-action",{event:c,data:{type:"del",devId:t.value.devId}})},a.appendChild(s),l.insertBefore(a,l.firstChild)}},cn=Object.freeze(Object.defineProperty({__proto__:null,devtool:dn,outClick:rn,resize:un,rightClick:pn},Symbol.toStringTag,{value:"Module"}));let Pe;function Hn(e){const t=b.merge(Xe,e),l=Hl(la),a=gn(t),i=t.plugins||[];i.unshift(a),i.forEach(p=>{vn(l,p)}),t?.mock&&ra(),Pe=Rt(t.axios),Zl(l);const o=ee($),s=q($);Jl(Pe),s.updateSettings(e?.settings||{}),o.setBaseAPI(t?.axios.baseURL),l.config.globalProperties.$http=Pe,l.config.globalProperties.$router=le,window.App=l,window.OmsOptions=t,Tl(()=>({"X-Token":We()})),le.isReady().then(()=>l.mount("#app"))}function mn(e,t={}){Object.keys(t).forEach(l=>{e.component(l,t[l])})}function hn(e=[]){e.forEach(t=>{le.addRoute(t)}),V($).setCustomRoutes(e)}function fn(e,t){t.forEach(l=>{oe(l)&&(l=[l]),e.use(...l)})}function bn(e,t={}){Object.keys(t).forEach(l=>{e.directive(l,t[l])})}function yn(e={}){const t=["app","settings","user"];Object.keys(e).forEach(l=>{if(t.indexOf(l)!==-1){console.warn(`storeModule name [${l}] is use by base, please change it!`);return}console.warn("[store] plugin storeModules are not supported under Pinia. Ignored:",l)})}function vn(e,t){mn(e,t.components||{}),hn(t.routes||[]),fn(e,t.use||[]),bn(e,t.directives||{}),yn(t.storeModules||{}),It(t.mockApis||[])}function gn(e){return{components:{VIcon:Il},directives:cn,use:[le,[vl,{locale:ht,...e.settings?.ElementPlus}]]}}export{Gn as D,Fn as L,Dt as M,V as N,Hn as a};
